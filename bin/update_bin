#!/bin/bash

# Syncs ./bin with ~/bin.

source "$HOME/.shell_control" || echo "$(tput bold)error: ~/.shell_control not installed!$(tput sgr0)" >&2

EXCLUDES=(install usages macosver update_bin ignore)

if [[ -f ignore ]]; then
	while read I; do EXCLUDES+=("$I"); done < ignore
fi

CMD="rsync -apl"

for I in "${EXCLUDES[@]}"; do
	CMD="$CMD --exclude '$I'"
done

run "$CMD --delete ~/bin/ ." || abort "could not update bin"
