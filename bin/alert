#!/usr/bin/osascript

-- returns true iff an app with the given name is running
on is_app_running(name)
    tell application "System Events" to (name of processes) contains name
end is_app_running

-- raises an app with the given name if it's running
on raise_app(name)
    if is_app_running(name) then
        tell application name to activate
    end if
end raise_app

on run argv
    -- convert argv to text
    set message to ""
    repeat with arg in argv
        set message to message & " " & arg
    end repeat

    -- get currently active app
    set calling_app to (path to frontmost application as text)

    -- only show Dismiss button if Terminal isn't the current app
    set dialog_buttons to {"OK"}
    if calling_app as text doesn't contain "Terminal.app" then
        set dialog_buttons to dialog_buttons & "Dismiss"
    end if

    -- rightmost button should always be default
    set default_button to last item of dialog_buttons

    -- create an alert dialog message
    tell application "SystemUIServer" to display dialog message Â¬
        buttons dialog_buttons default button default_button with title "Alert" with icon stop
    
    -- only change focus if OK is pressed
    if result = {button returned: "OK"} 
        raise_app("Terminal")
    end if
end run
