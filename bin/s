#!/bin/bash

# Show git status for all directories in current directory.

source "$HOME/.shell_control" || echo "$(tput bold)error: ~/.shell_control not installed!$(tput sgr0)" >&2

CMD="git status -uno"
if [[ -n "$1" ]]; then
	CMD="$@"
fi

IFS=$'\n'
for I in $(find . -not -path . -maxdepth 1 -type d); do
	cd "$I" || abort "can't enter $I"

	if [[ -d .git ]]; then
		show "$(tput bold)========== $I ==========$(tput sgr0)"
		run "$CMD"
		echo -ne $"\n\n"
	fi

	cd - >/dev/null
done
